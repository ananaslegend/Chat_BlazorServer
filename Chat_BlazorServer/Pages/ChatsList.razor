@page "/chats"
@inherits BaseAuth

@inject IHttpClientFactory _httpClientFactory
@inject ITokenHelper tokenHelper
@inject ChatClient chatClient


@code {
    AuthStatus status = AuthStatus.NotSet;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            var response = await chatClient.GetAuthAsync("Test/");

            UserAccessCheck(response, () =>
            {
                status = AuthStatus.Authed;
                StateHasChanged();
            });
        }
    }
}
